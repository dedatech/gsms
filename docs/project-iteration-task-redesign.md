# 项目-迭代-任务关系重构方案

## 当前设计问题

**现状分析：**
- 项目、迭代、任务作为三个独立的一级菜单平级存在
- 用户认知混乱：迭代本质上是项目的一个阶段，不应该独立于项目
- 任务可以不属于任何迭代（iteration_id 可为 NULL），但缺少明确的项目类型区分

**用户需求：**
1. 项目应该分为两种类型：
   - **日程型项目**：简单项目，项目 → 任务（无迭代层）
   - **中大型项目**：复杂项目，项目 → 迭代 → 任务

2. 迭代应该是项目的子概念，而非独立的一级菜单

---

## 页面布局方案对比

### 布局方案 A：侧边栏导航（Notion 风格）

```
┌─────────────────────────────────────────────────────────────────┐
│ 项目详情：GSMS 工时管理系统                      [编辑] [设置] │
├──────────────┬──────────────────────────────────────────────────┤
│              │  ┌─────────────────────────────────────────────┐ │
│   概览       │  │  项目状态卡片                                 │ │
│   基本信息   │  │  ┌──────────┐ ┌──────────┐ ┌──────────┐    │ │
│   迭代管理   │  │  │进行中: 5 ││已完成: 12││待处理: 3 │    │ │
│   任务列表   │  │  └──────────┘ └──────────┘ └──────────┘    │ │
│   甘特图     │  └─────────────────────────────────────────────┘ │
│   项目成员   │                                                  │
│   工时统计   │  [最近动态]                                       │
│              │  • 张三完成了任务"用户登录功能" (2小时前)         │
│              │  • 李四创建了新迭代"Sprint 3" (昨天)             │
│              │  • 王五添加了3个新任务 (2天前)                    │
│              │                                                  │
│              │  [迭代管理] - 仅中大型项目显示                   │
│              │  ┌───────────────────────────────────────────┐  │
│              │  │ Sprint 1 (进行中)              [查看详情] │  │
│              │  │ 2024-01-15 ~ 2024-01-31                  │  │
│              │  │ 任务: 15 个 | 成员: 5 人                  │  │
│              │  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60%│  │
│              │  ├───────────────────────────────────────────┤  │
│              │  │ Sprint 2 (未开始)              [查看详情] │  │
│              │  │ 2024-02-01 ~ 2024-02-14                  │  │
│              │  │ 任务: 0 个 | 成员: - 人                   │  │
│              │  └───────────────────────────────────────────┘  │
│              │                                                  │
│              │  [任务列表]                                     │
│              │  看板视图: [待处理] [进行中] [已完成]             │
│              │  ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│              │  │任务卡片  ││任务卡片  ││任务卡片  │           │
│              │  │         ││         ││         │           │
│              │  └─────────┘ └─────────┘ └─────────┘           │
└──────────────┴──────────────────────────────────────────────────┘
```

**优势：**
- ✅ 左侧导航始终可见，切换模块方便
- ✅ 右侧内容区宽裕，展示内容丰富
- ✅ 类似 Notion、飞书文档等现代工具，用户熟悉
- ✅ 可收起侧边栏，全屏查看内容

---

### 布局方案 B：顶部标签页（Element UI 标准风格）

```
┌─────────────────────────────────────────────────────────────────┐
│ 项目详情：GSMS 工时管理系统                      [编辑] [返回] │
├─────────────────────────────────────────────────────────────────┤
│ [概览] [基本信息] [迭代管理] [任务列表] [甘特图] [成员] [统计] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  当前显示：概览                                                  │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐  │
│  │ 项目进度        │ │ 任务统计        │ │ 成员统计        │  │
│  │  ████████░░ 80% │ │ 总计: 30        │ │ 总计: 8         │  │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 迭代时间轴（仅中大型项目显示）                          │   │
│  │                                                         │   │
│  │  Sprint 1       Sprint 2       Sprint 3                │   │
│  │  ████████░░     ░░░░░░░░░░     ░░░░░░░░░░░              │   │
│  │  01-15~01-31    02-01~02-14    02-15~02-28             │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**优势：**
- ✅ Element UI 标准设计，实现简单
- ✅ 顶部标签页切换直观
- ✅ 内容区最大化显示

---

### 布局方案 C：卡片式仪表盘（Jira 风格）

```
┌─────────────────────────────────────────────────────────────────┐
│ GSMS 工时管理系统                                    [编辑] [菜单]│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 项目信息                                                 │   │
│  │ 状态：进行中  |  负责人：张三  |  创建时间：2024-01-01   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────┐  ┌─────────────────────┐            │
│  │ 迭代管理             │  │ 快捷操作             │            │
│  │ ┌─────────────────┐ │  │ [+ 新建迭代]        │            │
│  │ │Sprint 1         │ │  │ [+ 新建任务]        │            │
│  ││进行中 | 60%      │ │  │ [添加成员]          │            │
│  ││[查看详情] [编辑] │ │  │ [查看甘特图]        │            │
│  │ └─────────────────┘ │  │                     │            │
│  │ ┌─────────────────┐ │  └─────────────────────┘            │
│  │ │Sprint 2         │ │                                       │
│  ││未开始 | 0%       │ │  ┌─────────────────────────────────┐│
│  ││[查看详情] [编辑] │ │  │ 活跃任务                         ││
│  │ └─────────────────┘ │  │ • 用户管理功能      进行中      ││
│  │                     │  │ • 权限控制          进行中      ││
│  │ [+ 新建迭代]        │  │ • 前端页面设计      待处理      ││
│  └─────────────────────┘  └─────────────────────────────────┘│
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 任务看板                                                 │   │
│  │ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐     │   │
│  │ │ 待处理 (3)    │ │ 进行中 (5)    │ │ 已完成 (12)   │     │   │
│  │ ├──────────────┤ ├──────────────┤ ├──────────────┤     │   │
│  │ │ 任务卡片      │ │ 任务卡片      │ │ 任务卡片      │     │   │
│  │ │              │ │              │ │              │     │   │
│  │ └──────────────┘ └──────────────┘ └──────────────┘     │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**优势：**
- ✅ 仪表盘式展示，信息一目了然
- ✅ 卡片可拖拽排序，灵活性强
- ✅ 类似 Jira、Trello 等项目管理工具

---

### 布局方案 D：时间轴式（敏捷开发风格）

```
┌─────────────────────────────────────────────────────────────────┐
│ 📅 GSMS 工时管理系统 - 迭代视图                      [编辑视图]│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  时间轴: ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                    ↓                                           │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              Sprint 1 (已完成)                          │   │
│  │  2024-01-15 ~ 2024-01-31                                │   │
│  │  ████████████████████ 100%                              │   │
│  │                                                          │   │
│  │  任务: 15/15 完成  |  成员: 5 人  |  平均工时: 4.2h      │   │
│  │                                                          │   │
│  │  [查看详情] [重新打开]                                    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                          ↓                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              Sprint 2 (进行中) ⚡                        │   │
│  │  2024-02-01 ~ 2024-02-14                                │   │
│  │  ████████████░░░░░░ 60%                                  │   │
│  │                                                          │   │
│  │  进行中任务: 5  |  待处理: 3  |  成员: 6 人              │   │
│  │                                                          │   │
│  │  ┌─────────────────────────────────────────────────┐    │   │
│  │  │ 当前迭代任务看板                                  │    │   │
│  │  │ ┌─────────┐ ┌─────────┐ ┌─────────┐             │    │   │
│  │  │ │待处理 3 │ │进行中 5 │ │已完成 7 │             │    │   │
│  │  │ └─────────┘ └─────────┘ └─────────┘             │    │   │
│  │  └─────────────────────────────────────────────────┘    │   │
│  │                                                          │   │
│  │  [查看详情] [管理迭代]                                    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                          ↓                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              Sprint 3 (未开始) 📅                        │   │
│  │  2024-02-15 ~ 2024-02-28                                │   │
│  │  ░░░░░░░░░░░░░░░░ 0%                                    │   │
│  │                                                          │   │
│  │  计划任务: 0  |  待分配: 0  |  成员: - 人                │   │
│  │                                                          │   │
│  │  [开始规划] [编辑计划]                                    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                          ↓                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              Sprint 4 (未开始) 📅                        │   │
│  │  2024-03-01 ~ 2024-03-15                                │   │
│  │  ░░░░░░░░░░░░░░░░ 0%                                    │   │
│  │                                                          │   │
│  │  [+ 新建迭代]                                            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**优势：**
- ✅ 时间轴清晰展示项目进度
- ✅ 当前迭代突出显示
- ✅ 符合敏捷开发的时间观念
- ✅ 支持拖拽调整迭代顺序

---

### 布局方案 E：混合式（推荐 ⭐⭐⭐）

结合多种布局的优点，根据项目类型动态切换：

#### 日程型项目 - 卡片式

```
┌─────────────────────────────────────────────────────────────────┐
│ 📋 GSMS 工时管理系统                                [编辑] [···]│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📊 项目概览                                              │   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐         │   │
│  │ │ 项目状态     │ │ 任务统计     │ │ 成员统计     │         │   │
│  │ │ 进行中      │ │ 总计: 30    │ │ 总计: 8     │         │   │
│  │ │ ████████░░  │ │ 完成: 18    │ │ 活跃: 5     │         │   │
│  │ └─────────────┘ └─────────────┘ └─────────────┘         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  [新建任务] [批量导入] [甘特图] [成员管理]                       │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 任务看板                                                 │   │
│  │ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────┐│   │
│  │ │ 待处理 (3)       │ │ 进行中 (5)       │ │ 已完成 (12) ││   │
│  │ ├─────────────────┤ ├─────────────────┤ ├─────────────┤│   │
│  │ │ 📌 用户登录     │ │ 📌 权限控制     │ │ ✅ 注册功能 ││   │
│  │ │    张三 2天前   │ │    李四 5小时前 │ │    王五     ││   │
│  │ │    🔴 高优先级  │ │    🟡 中优先级  │ │    1天前    ││   │
│  │ ├─────────────────┤ ├─────────────────┤ ├─────────────┤│   │
│  │ │ 📌 数据备份     │ │ 📌 前端优化     │ │ ✅ 数据库   ││   │
│  │ │    赵六 1天前   │ │    钱七 2天前   │ │    张三     ││   │
│  │ │    🟢 低优先级  │ │    🟡 中优先级  │ │    3天前    ││   │
│  │ └─────────────────┘ └─────────────────┘ └─────────────┘│   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 中大型项目 - 时间轴 + 侧边栏

```
┌─────────────────────────────────────────────────────────────────┐
│ 🚀 电商平台重构                                    [编辑] [设置]│
├──────────────┬──────────────────────────────────────────────────┤
│              │                                                  │
│  📊 概览     │  ┌─────────────────────────────────────────────┐│
│  📅 迭代     │  │ 当前迭代: Sprint 2 (进行中) ⚡               ││
│  ✅ 任务     │  │ 2024-02-01 ~ 2024-02-14  |  进度: 60%       ││
│  👥 成员     │  │ ████████████░░░░░░                            ││
│  📈 统计     │  │                                                 ││
│  ⚙️ 设置     │  │ [查看迭代详情] [管理任务] [燃尽图]            ││
│              │  └─────────────────────────────────────────────┘│
│              │                                                  │
│              │  📅 迭代时间轴                                    │
│              │  ┌───────────────────────────────────────────┐  │
│              │  │ ✓ Sprint 1 (已完成) 100%                  │  │
│              │  │   2024-01-15 ~ 2024-01-31                 │  │
│              │  ├───────────────────────────────────────────┤  │
│              │  │ ⚡ Sprint 2 (进行中) 60%  ← 当前           │  │
│              │  │   2024-02-01 ~ 2024-02-14                 │  │
│              │  ├───────────────────────────────────────────┤  │
│              │  │ 📅 Sprint 3 (未开始) 0%                    │  │
│              │  │   2024-02-15 ~ 2024-02-28                 │  │
│              │  └───────────────────────────────────────────┘  │
│              │  [+ 新建迭代]                                   │
│              │                                                  │
│              │  📋 当前迭代任务 (Sprint 2)                      │
│              │  ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│              │  │ 待处理  │ │ 进行中  │ │ 已完成  │           │
│              │  │ 3 个    │ │ 5 个    │ │ 7 个    │           │
│              │  └─────────┘ └─────────┘ └─────────┘           │
│              │  [查看全部任务]                                   │
│              │                                                  │
└──────────────┴──────────────────────────────────────────────────┘
```

**优势：**
- ✅ 根据项目类型自动切换最优布局
- ✅ 日程型项目强调任务管理
- ✅ 中大型项目强调迭代和时间规划
- ✅ 左侧导航保持一致性

---

## 方案对比

### 方案一：双项目类型 + 项目内嵌套（推荐 ⭐）

#### 设计理念
根据项目规模和复杂度，提供两种不同的管理模式，用户在创建项目时选择类型。

#### 推荐布局：方案 E（混合式）

**菜单结构调整：**
```
侧边栏：
├── 首页
├── 项目管理（唯一入口）
├── 任务中心（跨项目的任务聚合视图）
├── 工时管理
│   ├── 工时日历
│   └── 工时列表
└── 系统管理
```

**关键改动：**
- ❌ 移除独立的一级菜单"迭代管理"
- ✅ 迭代成为项目详情页内的一个标签页
- ✅ "任务管理"改为"任务中心"，强化跨项目任务聚合

#### 优势
- ✅ 清晰区分两种项目类型，符合实际使用场景
- ✅ 迭代作为项目内的子模块，层级关系清晰
- ✅ 保留"任务中心"作为跨项目的任务聚合视图（我的任务、全部任务等）
- ✅ 用户认知负担小，项目管理是唯一入口
- ✅ 日程型项目简化操作，中大型项目提供完整管理能力

#### 劣势
- ❌ 需要添加 `project_type` 字段到数据库
- ❌ 项目详情页需要根据类型动态调整布局
- ❌ 用户创建项目时需要理解两种类型的区别

---

### 方案二：统一项目类型 + 模块化迭代（可选）

#### 设计理念
所有项目默认支持迭代，迭代是可选的（类似 Scrum 的灵活性）。

#### 菜单结构
```
侧边栏：
├── 首页
├── 项目管理
├── 任务管理（跨项目）
└── ...
```

#### 优势
- ✅ 无需区分项目类型，统一管理
- ✅ 迭代作为可选模块，用户自由选择是否使用
- ✅ 灵活性高，可以从简单项目升级为迭代项目

#### 劣势
- ❌ 日程型项目仍会看到"迭代"标签，可能造成困惑
- ❌ 用户可能不清楚何时应该启用迭代
- ❌ 缺少针对简单项目的优化体验

---

### 方案三：完全扁平化（不推荐）

#### 设计理念
移除迭代概念，所有项目直接管理任务，通过标签或分组实现类似功能。

#### 优势
- ✅ 最简化的产品结构
- ✅ 降低学习成本

#### 劣势
- ❌ 无法支持敏捷开发的迭代管理需求
- ❌ 中大型项目管理能力不足
- ❌ 失去了迭代的核心价值（周期性、里程碑）

---

## 推荐实施方案（方案一详细设计）

### 1. 数据库改造

```sql
-- 添加项目类型字段
ALTER TABLE `gsms_project`
ADD COLUMN `project_type` TINYINT DEFAULT 1 COMMENT '项目类型 1:日程型 2:中大型（含迭代）'
AFTER `code`;

-- 任务表添加约束：中大型项目的任务必须关联迭代
-- 通过应用层校验，数据库层仍保持 iteration_id 可为 NULL
-- （为了支持日程型项目和任务迁移）
```

### 2. 前端路由调整

```typescript
// 移除独立的一级菜单"迭代管理"
// 新增"任务中心"作为跨项目任务视图

routes = [
  { path: '/projects', name: 'Projects', component: ProjectList },
  { path: '/projects/:id', name: 'ProjectDetail', component: ProjectDetail },
  { path: '/projects/:id/iterations/:iterationId', name: 'IterationDetail', component: IterationDetail },
  { path: '/tasks', name: 'TaskCenter', component: TaskCenter }, // 改名，强化"中心"概念
  // ... 其他路由
]
```

### 3. 项目创建流程改造

```typescript
// ProjectCreateDialog.vue
<el-form-item label="项目类型" required>
  <el-radio-group v-model="formData.projectType">
    <el-radio :label="1">
      <div class="project-type-option">
        <div class="type-title">
          <el-icon><Calendar /></el-icon>
          <span>日程型项目</span>
        </div>
        <div class="type-desc">适合简单项目，直接管理任务，无需迭代</div>
      </div>
    </el-radio>
    <el-radio :label="2">
      <div class="project-type-option">
        <div class="type-title">
          <el-icon><FolderOpened /></el-icon>
          <span>中大型项目</span>
        </div>
        <div class="type-desc">适合复杂项目，支持迭代管理（如Sprint）</div>
      </div>
    </el-radio>
  </el-radio-group>
</el-form-item>
```

### 4. 项目详情页动态布局

```typescript
// ProjectDetail.vue
<template>
  <div class="project-detail">
    <!-- 顶部标签页根据项目类型动态显示 -->
    <el-tabs v-model="activeTab">
      <el-tab-pane label="概览" name="overview" />
      <el-tab-pane label="基本信息" name="info" />
      <el-tab-pane label="项目成员" name="members" />

      <!-- 中大型项目才有迭代管理 -->
      <el-tab-pane v-if="project.projectType === 2" label="迭代管理" name="iterations">
        <IterationList :project-id="project.id" />
      </el-tab-pane>

      <!-- 日程型项目直接显示任务，中大型项目显示任务列表 -->
      <el-tab-pane :label="project.projectType === 1 ? '任务列表' : '全部任务'" name="tasks">
        <TaskList :project-id="project.id" :project-type="project.projectType" />
      </el-tab-pane>

      <el-tab-pane label="甘特图" name="gantt" />
      <el-tab-pane label="工时统计" name="workhours" />
    </el-tabs>
  </div>
</template>
```

### 5. 任务创建时的校验

```typescript
// TaskCreateDialog.vue
const validateTask = () => {
  // 中大型项目的任务必须选择迭代
  if (projectType === 2 && !formData.iterationId) {
    ElMessage.warning('中大型项目的任务必须关联到某个迭代')
    return false
  }

  // 日程型项目的任务不能选择迭代
  if (projectType === 1 && formData.iterationId) {
    ElMessage.warning('日程型项目不支持迭代管理')
    return false
  }

  return true
}
```

---

## 关键文件清单

### 需要修改的文件

**数据库：**
1. `backend/src/main/resources/db/migration/V20260114__Add_project_type.sql` - 新增迁移脚本

**后端：**
2. `backend/src/main/java/com/gsms/gsms/model/entity/Project.java` - 添加 projectType 字段
3. `backend/src/main/java/com/gsms/gsms/model/enums/ProjectType.java` - 新增枚举
4. `backend/src/main/java/com/gsms/gsms/dto/project/ProjectCreateReq.java` - 添加 projectType
5. `backend/src/main/java/com/gsms/gsms/service/impl/TaskServiceImpl.java` - 添加项目类型校验

**前端：**
6. `frontend/src/components/Layout.vue` - 移除独立迭代菜单，调整任务菜单
7. `frontend/src/views/project/ProjectList.vue` - 添加项目类型筛选
8. `frontend/src/views/project/ProjectDetail.vue` - 根据类型动态显示标签页
9. `frontend/src/views/project/ProjectCreateDialog.vue` - 添加项目类型选择
10. `frontend/src/views/task/TaskList.vue` - 改为 TaskCenter，强化聚合视图
11. `frontend/src/views/iteration/IterationList.vue` - 可删除或改造为迭代选择器组件

---

## 实施步骤

### Phase 1: 数据库和后端基础（1天）
- 创建数据库迁移脚本
- 修改 Project 实体和枚举
- 更新 DTO 和 Converter
- 后端接口测试

### Phase 2: 前端菜单和路由调整（0.5天）
- 调整侧边栏菜单结构
- 修改路由配置
- 更新面包屑导航

### Phase 3: 项目创建流程（1天）
- 实现项目类型选择
- 添加类型说明和引导
- 表单校验逻辑

### Phase 4: 项目详情页改造（2天）
- 实现动态标签页
- 日程型项目的任务列表
- 中大型项目的迭代管理
- 迭代详情页

### Phase 5: 任务创建和校验（1天）
- 根据项目类型约束任务创建
- 迭代选择的动态显示/隐藏
- 表单验证逻辑

### Phase 6: 任务中心改造（1天）
- 改造为跨项目任务聚合视图
- 我的任务、全部任务等筛选
- 保留原有的任务管理能力

### Phase 7: 测试和优化（1天）
- 端到端测试两种项目类型
- 边界情况测试（类型转换、数据迁移）
- 性能优化

---

## 验证方案

### 测试场景

1. **创建日程型项目**
   - 选择"日程型项目"
   - 直接创建任务（无需选择迭代）
   - 项目详情页不显示"迭代管理"标签

2. **创建中大型项目**
   - 选择"中大型项目"
   - 创建迭代
   - 创建任务时必须选择迭代
   - 项目详情页显示"迭代管理"标签

3. **任务中心**
   - 查看跨项目的任务列表
   - 按项目、迭代筛选任务
   - 支持原有的任务管理功能

4. **迭代详情**
   - 从项目详情进入迭代
   - 查看迭代内的任务列表
   - 返回项目按钮

---

## 向后兼容性

### 数据迁移策略

```sql
-- 现有项目默认类型设为"日程型"（保守策略）
UPDATE gsms_project SET project_type = 1 WHERE project_type IS NULL;

-- 或者根据是否有关联迭代判断（激进策略）
UPDATE gsms_project p
SET project_type = CASE
  WHEN EXISTS (SELECT 1 FROM gsms_iteration i WHERE i.project_id = p.id AND i.is_deleted = 0)
  THEN 2  -- 有迭代则设为中大型项目
  ELSE 1  -- 无迭代则设为日程型项目
END
WHERE project_type IS NULL;
```

### 功能兼容
- 旧的"迭代管理"一级菜单可以保留一段时间（标记为"即将废弃"）
- 旧的数据结构保持兼容（iteration_id 仍可为 NULL）
- 逐步引导用户使用新的项目分类方式

---

## 风险评估

| 风险 | 等级 | 缓解措施 |
|------|------|----------|
| 用户不理解两种项目类型的区别 | 中 | 创建时提供详细说明和典型场景 |
| 现有中大型项目被错误分类为日程型 | 中 | 数据迁移时智能判断，提供手动调整入口 |
| 迭代管理入口变深，操作变繁琐 | 低 | 项目详情页默认显示迭代，添加快捷入口 |
| 项目类型创建后无法修改 | 高 | 允许升级（日程型→中大型），禁止降级 |

---

## 下一步

需要您确认：
1. 是否同意采用**方案一（双项目类型 + 项目内嵌套）**？
2. 是否同意采用**方案 E（混合式布局）**作为推荐的页面布局风格？
3. 对于项目类型的数据迁移策略，倾向保守（全部设为日程型）还是激进（根据是否有迭代智能判断）？
4. 是否需要保留"迭代管理"一级菜单作为过渡（标记为即将废弃）？
5. 项目类型创建后是否允许修改？如果允许，是否只允许单向升级（日程型→中大型）？
